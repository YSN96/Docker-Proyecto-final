"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[505],{5815:function(t,a,e){e.d(a,{Z:function(){return I}});var n=e(3396),i=e(9242),o=e.p+"img/logo.f337e303.png";const l=t=>((0,n.dD)("data-v-3829407f"),t=t(),(0,n.Cn)(),t),s={id:"logo-cli",class:"logo",style:{display:"none"}},c=l((()=>(0,n._)("img",{class:"logoImg",src:o,alt:"COMBOI"},null,-1))),d={id:"cliente-link",class:"container",style:{display:"none"}},r=l((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,n._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),u=l((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,n._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,n._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),m=[u],p={id:"logo-admin",class:"logo",style:{display:"none"}},g=l((()=>(0,n._)("img",{class:"logoImg",src:o,alt:"COMBOI"},null,-1))),h={id:"admin-link",class:"container",style:{display:"none"}},_=l((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,n._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),f=l((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,n._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,n._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),v=[f];function w(t,a,e,o,l,u){const f=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",null,[(0,n._)("div",s,[(0,n.Wm)(f,{to:"/cliente",class:"navbar-brand font-effect-3d"},{default:(0,n.w5)((()=>[c])),_:1})]),(0,n._)("div",d,[(0,n.Wm)(f,{to:"/cliente"},{default:(0,n.w5)((()=>[(0,n.Uk)("Home")])),_:1}),(0,n.Wm)(f,{to:"/about"},{default:(0,n.w5)((()=>[(0,n.Uk)("About")])),_:1}),(0,n.Wm)(f,{to:"/contact"},{default:(0,n.w5)((()=>[(0,n.Uk)("Contact")])),_:1}),(0,n.Wm)(f,{to:"/perfil/"+l.clienteActual},{default:(0,n.w5)((()=>[r])),_:1},8,["to"]),(0,n._)("a",{onClick:a[0]||(a[0]=(0,i.iM)(((...t)=>u.cerrarSesion&&u.cerrarSesion(...t)),["prevent"])),href:""},m)]),(0,n._)("div",p,[(0,n.Wm)(f,{to:"/admin",class:"navbar-brand font-effect-3d"},{default:(0,n.w5)((()=>[g])),_:1})]),(0,n._)("div",h,[(0,n.Wm)(f,{to:"/admin"},{default:(0,n.w5)((()=>[(0,n.Uk)("Home")])),_:1}),(0,n.Wm)(f,{to:"/perfil/"+l.clienteActual},{default:(0,n.w5)((()=>[_])),_:1},8,["to"]),(0,n._)("a",{onClick:a[1]||(a[1]=(0,i.iM)(((...t)=>u.cerrarSesion&&u.cerrarSesion(...t)),["prevent"])),href:""},v)])])}e(7658);var b=e(6052),y=e.n(b),k={name:"navBar",data(){return{clienteActual:null}},methods:{async carregarDatos(){const t=localStorage.getItem("user-token"),a=y().decode(t),e=a.id;this.clienteActual=e;const n=a.role;if("ROLE_ADMIN"===n){const t=document.getElementById("logo-admin");t.style.display="block";const a=document.getElementById("admin-link");a.style.display="block"}else{const t=document.getElementById("logo-cli");t.style.display="block";const a=document.getElementById("cliente-link");a.style.display="block"}},cerrarSesion(){localStorage.clear(),this.$router.push({name:"LoginView"})}},async mounted(){let t=localStorage.getItem("user-token");t?this.carregarDatos():this.$router.push({name:"LoginView"})}},C=e(89);const x=(0,C.Z)(k,[["render",w],["__scopeId","data-v-3829407f"]]);var I=x},7935:function(t,a,e){e.r(a),e.d(a,{default:function(){return Nt}});var n=e(3396),i=e(7139),o=e(9242),l=e.p+"img/paypal.ab7eb910.jpg";const s={class:"h-100 h-custom",style:{"background-color":"#eee"}},c={class:"container py-5 h-100"},d={class:"row d-flex justify-content-center align-items-center h-100"},r={class:"col"},u={class:"card"},m={class:"card-body p-4"},p={class:"row"},g={class:"col-lg"},h={class:"mb-3"},_=(0,n._)("i",{class:"fas fa-long-arrow-alt-left me-2"},null,-1),f=(0,n._)("hr",null,null,-1),v={key:0},w=(0,n._)("h2",null,"Mis pedidos",-1),b={class:"card-body"},y={class:"d-flex justify-content-between"},k={class:"d-flex flex-row align-items-center"},C=["src","alt"],x={class:"ms-3"},I={class:"d-flex flex-row align-items-center"},z=["onClick"],A=(0,n._)("i",{class:"fas fa-minus"},null,-1),B=[A],E={style:{width:"50px"}},M=["onUpdate:modelValue","onInput"],$=["onClick"],D=(0,n._)("i",{class:"fas fa-plus"},null,-1),S=[D],U={style:{width:"80px"}},j={class:"mb-0"},P=["onClick"],T=(0,n._)("i",{class:"fas fa-trash-alt"},null,-1),V=[T],O={key:1},W=(0,n._)("h2",null,"Mis pedidos",-1),H={key:0},L={class:"card-body"},N={class:"d-flex justify-content-between"},K={class:"d-flex flex-row align-items-center"},q=["src","alt"],G={class:"ms-3"},Z={class:"d-flex flex-row align-items-center"},Y=["onClick"],J=(0,n._)("i",{class:"fas fa-minus"},null,-1),R=[J],F={style:{width:"50px"}},Q=["onUpdate:modelValue","onInput"],X=["onClick"],tt=(0,n._)("i",{class:"fas fa-plus"},null,-1),at=[tt],et={style:{width:"80px"}},nt={class:"mb-0"},it=["onClick"],ot=(0,n._)("i",{class:"fas fa-trash-alt"},null,-1),lt=[ot],st=(0,n._)("h2",null,"Otros pedidos",-1),ct={key:0},dt={class:"card-body"},rt={class:"d-flex justify-content-between"},ut={class:"d-flex flex-row align-items-center"},mt=["src","alt"],pt={class:"ms-3"},gt={class:"d-flex flex-row align-items-center"},ht=["onClick"],_t=(0,n._)("i",{class:"fas fa-minus"},null,-1),ft=[_t],vt={style:{width:"50px"}},wt=["onUpdate:modelValue","onInput"],bt=["onClick"],yt=(0,n._)("i",{class:"fas fa-plus"},null,-1),kt=[yt],Ct={style:{width:"80px"}},xt={class:"mb-0"},It=["onClick"],zt=(0,n._)("i",{class:"fas fa-trash-alt"},null,-1),At=[zt],Bt={class:"card bg-primary text-white rounded-3"},Et={class:"card-body"},Mt={class:"d-flex justify-content-between mb-4"},$t=(0,n._)("h4",{class:"mb-2"},"Total",-1),Dt={class:"mb-2"},St={class:"d-flex justify-content-center"},Ut=(0,n._)("button",{id:"pago",type:"button",class:"btn btn-info btn-block btn-lg"},[(0,n._)("span",null,[(0,n.Uk)("Pagar "),(0,n._)("i",{class:"fas fa-long-arrow-alt-right ms-2"})])],-1),jt=(0,n._)("span",null,[(0,n.Uk)("Prueba de Pagar "),(0,n._)("i",{class:"fas fa-long-arrow-alt-right ms-2"})],-1),Pt=[jt],Tt=(0,n.uE)('<div class="card mt-3"><div class="card-body"><h4><strong>Nos Acceptamos</strong></h4><img class="me-2" width="45px" src="https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg" alt="Visa"><img class="me-2" width="45px" src="https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg" alt="Mastercard"><img class="me-2" width="45px" src="'+l+'" alt="PayPal"></div></div>',1);function Vt(t,a,e,l,A,D){const T=(0,n.up)("Navbar"),J=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("body",null,[(0,n.Wm)(T),(0,n._)("section",s,[(0,n._)("div",c,[(0,n._)("div",d,[(0,n._)("div",r,[(0,n._)("div",u,[(0,n._)("div",m,[(0,n._)("div",p,[(0,n._)("div",g,[(0,n._)("h5",h,[(0,n.Wm)(J,{to:"/articulos",class:"text-body"},{default:(0,n.w5)((()=>[_,(0,n.Uk)("Vuelve a elegir más Articulos")])),_:1})]),f,null!=A.idInvitado?((0,n.wg)(),(0,n.iD)("div",v,[w,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.pedidos,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"card mb-3",key:t.id_carrito},[(0,n._)("div",b,[(0,n._)("div",y,[(0,n._)("div",k,[(0,n._)("div",null,[(0,n._)("img",{src:"http://127.0.0.1:8000/api/images/"+t.archivo_imagen,class:"img-fluid rounded-3",alt:t.nombre,style:{width:"65px"}},null,8,C)]),(0,n._)("div",x,[(0,n._)("h5",null,(0,i.zw)(t.nombre),1),(0,n._)("p",null,(0,i.zw)(t.descripcion),1)])]),(0,n._)("div",I,[(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.restarCantidad(t)},B,8,z),(0,n._)("div",E,[(0,n.wy)((0,n._)("input",{id:"cantidad",min:"1",name:"cantidad","onUpdate:modelValue":a=>t.cantidad=a,type:"number",class:"form-control form-control-sm",onInput:a=>D.actualizarCantidad(t)},null,40,M),[[o.nr,t.cantidad]])]),(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.sumarCantidad(t)},S,8,$),(0,n._)("div",U,[(0,n._)("h5",j,(0,i.zw)(t.precio*t.cantidad)+" € ",1)]),(0,n._)("button",{onClick:(0,o.iM)((a=>D.eleminarPedido(t.id_carrito)),["prevent"]),class:"btn btn-danger mx-2"},V,8,P)])])])])))),128))])):(0,n.kq)("",!0),null==A.idInvitado?((0,n.wg)(),(0,n.iD)("div",O,[W,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.pedidos,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"card mb-3",key:t.id_carrito},[null==t.id_invitado?((0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",L,[(0,n._)("div",N,[(0,n._)("div",K,[(0,n._)("div",null,[(0,n._)("img",{src:"http://127.0.0.1:8000/api/images/"+t.archivo_imagen,class:"img-fluid rounded-3",alt:t.nombre,style:{width:"65px"}},null,8,q)]),(0,n._)("div",G,[(0,n._)("h5",null,(0,i.zw)(t.nombre),1),(0,n._)("p",null,(0,i.zw)(t.descripcion),1)])]),(0,n._)("div",Z,[(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.restarCantidad(t)},R,8,Y),(0,n._)("div",F,[(0,n.wy)((0,n._)("input",{id:"cantidad",min:"1",name:"cantidad","onUpdate:modelValue":a=>t.cantidad=a,type:"number",class:"form-control form-control-sm",onInput:a=>D.actualizarCantidad(t)},null,40,Q),[[o.nr,t.cantidad]])]),(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.sumarCantidad(t)},at,8,X),(0,n._)("div",et,[(0,n._)("h5",nt,(0,i.zw)(t.precio*t.cantidad)+" € ",1)]),(0,n._)("button",{onClick:(0,o.iM)((a=>D.eleminarPedido(t.id_carrito)),["prevent"]),class:"btn btn-danger mx-2"},lt,8,it)])])])])):(0,n.kq)("",!0)])))),128)),st,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.pedidos,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"card mb-3",key:t.id_carrito},[null!=t.id_invitado?((0,n.wg)(),(0,n.iD)("div",ct,[(0,n._)("div",dt,[(0,n._)("div",rt,[(0,n._)("div",ut,[(0,n._)("div",null,[(0,n._)("img",{src:"http://127.0.0.1:8000/api/images/"+t.archivo_imagen,class:"img-fluid rounded-3",alt:t.nombre,style:{width:"65px"}},null,8,mt)]),(0,n._)("div",pt,[(0,n._)("h5",null,(0,i.zw)(t.nombre),1),(0,n._)("p",null,(0,i.zw)(t.descripcion),1)])]),(0,n._)("div",gt,[(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.restarCantidad(t)},ft,8,ht),(0,n._)("div",vt,[(0,n.wy)((0,n._)("input",{id:"cantidad",min:"1",name:"cantidad","onUpdate:modelValue":a=>t.cantidad=a,type:"number",class:"form-control form-control-sm",onInput:a=>D.actualizarCantidad(t)},null,40,wt),[[o.nr,t.cantidad]])]),(0,n._)("button",{class:"btn btn-link px-2",onClick:a=>D.sumarCantidad(t)},kt,8,bt),(0,n._)("div",Ct,[(0,n._)("h5",xt,(0,i.zw)(t.precio*t.cantidad)+" € ",1)]),(0,n._)("button",{onClick:(0,o.iM)((a=>D.eleminarPedido(t.id_carrito)),["prevent"]),class:"btn btn-danger mx-2"},At,8,It)])])])])):(0,n.kq)("",!0)])))),128))])):(0,n.kq)("",!0),(0,n._)("div",Bt,[(0,n._)("div",Et,[(0,n._)("div",Mt,[$t,(0,n._)("h4",Dt,(0,i.zw)(D.total)+" €",1)]),(0,n._)("div",St,[Ut,(0,n._)("button",{id:"pagoPrueba",onClick:a[0]||(a[0]=(0,o.iM)((t=>D.pagoConcepto(this.idConcepto)),["prevent"])),type:"button",class:"btn btn-info btn-block btn-lg"},Pt)])])]),Tt])])])])])])])])])}e(7658);var Ot=e(5815),Wt={name:"vistaCarrito",components:{Navbar:Ot.Z},data(){return{pedidos:[],idConcepto:"",idInvitado:""}},methods:{async articulosCarrito(t){const a=localStorage.getItem("user-token"),e=await fetch(`http://127.0.0.1:8000/api/carrito/${t}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),n=await e.json();console.log(n),this.pedidos=n.results,this.idInvitado=n.id_invitado},async articulosUsuario(t,a){const e=localStorage.getItem("user-token"),n=await fetch(`http://127.0.0.1:8000/api/carrito/${t}/${a}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),i=await n.json();console.log(i),this.pedidos=i.results,this.idInvitado=i.id_invitado,console.log(this.idInvitado)},async actualizarCantidad(t){const a=localStorage.getItem("user-token"),e={cantidad:t.cantidad};try{const n=await fetch(`http://127.0.0.1:8000/api/carrito/${t.id_carrito}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Error al actualizar la cantidad en la base de datos.");{const t=await n.json();console.log(t)}}catch(n){console.error(n)}},restarCantidad(t){t.cantidad>1&&(t.cantidad--,this.actualizarCantidad(t))},sumarCantidad(t){t.cantidad++,this.actualizarCantidad(t)},async eleminarPedido(t){const a=localStorage.getItem("user-token"),e=await fetch(`http://127.0.0.1:8000/api/carrito/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),n=await e.json();console.log(n),n.message&&this.carregarDatos()},async pagoConcepto(t){const a=localStorage.getItem("user-token"),e={estado:!0};try{const n=await fetch(`http://127.0.0.1:8000/api/concepto/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Error al actualizar el estado en la base de datos.");{const t=await n.json();console.log(t),t.message&&this.$swal({title:"!Muchsimas Gracias!",text:"El pago Realizado Correctamente",icon:"info",confirmButtonText:"OK"}).then((()=>{this.$router.push({name:"vistaCliente"})}))}}catch(n){console.error(n)}},async carregarConceptos(t){const a=localStorage.getItem("user-token");try{const e=await fetch(`http://127.0.0.1:8000/api/concepto/${t}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),n=await e.json();console.log(n);let i=n;1==i.estado&&this.$swal({title:"Alerta",text:"No tienes acceso a esta pagina por Id de la cena no es valido",icon:"info",confirmButtonText:"OK"}).then((()=>{this.$router.push({name:"vistaCliente"})})),n.error&&this.$router.push({name:"vistaCliente"})}catch(e){console.error(e)}},async carregarDatos(){let t=localStorage.getItem("user-token");if(t){const t=localStorage.getItem("conceptoId");this.idConcepto=t;const a=localStorage.getItem("usuarioInvitado");if(console.log(t),console.log(a),a&&"null"!=a&&"undefined"!=a&&""!=a){console.log("fffffsdasdasdasdasdasdasdasdsa"),this.carregarConceptos(t),this.articulosUsuario(t,a);const e=document.getElementById("pago");e.style.display="none";const n=document.getElementById("pagoPrueba");n.style.display="none"}else{this.carregarConceptos(t),this.articulosCarrito(t);const a=document.getElementById("pago");a.style.display="block";const e=document.getElementById("pagoPrueba");e.style.display="block"}}else this.$router.push({name:"LoginView"})}},computed:{total(){let t=0;for(let a=0;a<this.pedidos.length;a++)t+=this.pedidos[a].precio*this.pedidos[a].cantidad;return t}},async mounted(){this.carregarDatos()}},Ht=e(89);const Lt=(0,Ht.Z)(Wt,[["render",Vt]]);var Nt=Lt}}]);
//# sourceMappingURL=505.00dead01.js.map