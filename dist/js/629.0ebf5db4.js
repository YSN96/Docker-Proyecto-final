"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[629],{5815:function(t,e,a){a.d(e,{Z:function(){return z}});var o=a(3396),i=a(9242),s=a.p+"img/logo.f337e303.png";const n=t=>((0,o.dD)("data-v-3829407f"),t=t(),(0,o.Cn)(),t),l={id:"logo-cli",class:"logo",style:{display:"none"}},r=n((()=>(0,o._)("img",{class:"logoImg",src:s,alt:"COMBOI"},null,-1))),c={id:"cliente-link",class:"container",style:{display:"none"}},d=n((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),u=n((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),h=[u],g={id:"logo-admin",class:"logo",style:{display:"none"}},p=n((()=>(0,o._)("img",{class:"logoImg",src:s,alt:"COMBOI"},null,-1))),m={id:"admin-link",class:"container",style:{display:"none"}},v=n((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),f=n((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),_=[f];function w(t,e,a,s,n,u){const f=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",null,[(0,o._)("div",l,[(0,o.Wm)(f,{to:"/cliente",class:"navbar-brand font-effect-3d"},{default:(0,o.w5)((()=>[r])),_:1})]),(0,o._)("div",c,[(0,o.Wm)(f,{to:"/cliente"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),(0,o.Wm)(f,{to:"/about"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1}),(0,o.Wm)(f,{to:"/contact"},{default:(0,o.w5)((()=>[(0,o.Uk)("Contact")])),_:1}),(0,o.Wm)(f,{to:"/perfil/"+n.clienteActual},{default:(0,o.w5)((()=>[d])),_:1},8,["to"]),(0,o._)("a",{onClick:e[0]||(e[0]=(0,i.iM)(((...t)=>u.cerrarSesion&&u.cerrarSesion(...t)),["prevent"])),href:""},h)]),(0,o._)("div",g,[(0,o.Wm)(f,{to:"/admin",class:"navbar-brand font-effect-3d"},{default:(0,o.w5)((()=>[p])),_:1})]),(0,o._)("div",m,[(0,o.Wm)(f,{to:"/admin"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),(0,o.Wm)(f,{to:"/perfil/"+n.clienteActual},{default:(0,o.w5)((()=>[v])),_:1},8,["to"]),(0,o._)("a",{onClick:e[1]||(e[1]=(0,i.iM)(((...t)=>u.cerrarSesion&&u.cerrarSesion(...t)),["prevent"])),href:""},_)])])}a(7658);var y=a(6052),b=a.n(y),k={name:"navBar",data(){return{clienteActual:null}},methods:{async carregarDatos(){const t=localStorage.getItem("user-token"),e=b().decode(t),a=e.id;this.clienteActual=a;const o=e.role;if("ROLE_ADMIN"===o){const t=document.getElementById("logo-admin");t.style.display="block";const e=document.getElementById("admin-link");e.style.display="block"}else{const t=document.getElementById("logo-cli");t.style.display="block";const e=document.getElementById("cliente-link");e.style.display="block"}},cerrarSesion(){localStorage.clear(),this.$router.push({name:"LoginView"})}},async mounted(){let t=localStorage.getItem("user-token");t?this.carregarDatos():this.$router.push({name:"LoginView"})}},I=a(89);const C=(0,I.Z)(k,[["render",w],["__scopeId","data-v-3829407f"]]);var z=C},2595:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var o=a(3396),i=a(7139),s=a(9242);const n=t=>((0,o.dD)("data-v-090f0655"),t=t(),(0,o.Cn)(),t),l={class:"container-fluid"},r={id:"artic"},c={class:"header mt-5"},d={class:"d-flex justify-content-around"},u={class:"fw-bold text-black"},h={class:"badge badge-secondary"},g={id:"estadoCo",class:"fw-bold text-black"},p={class:"badge badge-secondary"},m={class:"fw-bold text-black"},v=n((()=>(0,o._)("span",{class:"badge badge-secondary"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"40",fill:"currentColor",class:"bi bi-cart4",viewBox:"0 2 16 16"},[(0,o._)("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"})]),(0,o._)("i",{class:"fas fa-long-arrow-alt-right ms-2"})],-1))),f={class:"row row-cols-4 g-4"},_={class:"card mt-5"},w=["src","alt"],y={class:"card-footer bg-gray-200 border-top border-gray-300 p-4"},b={class:"card-title"},k={class:"card-text"},I={class:"d-flex justify-content-around align-items-center mt-3"},C=n((()=>(0,o._)("h5",{class:"card-text"},"Precio:",-1))),z={class:"h5 mb-0 text-gray"},A={class:"d-flex justify-content-center align-content-end mt-4"},x=["onFocus","onUpdate:modelValue"],B=["onClick"],H=n((()=>(0,o._)("i",{class:"fa fa-shopping-basket","aria-hidden":"true"},null,-1))),M={key:0,class:"alert alert-danger shadow-lg p-3 mt-3 rounded",role:"alert"},S=n((()=>(0,o._)("i",{class:"fas fa-exclamation-triangle",style:{"font-size":"24px"}},null,-1)));function E(t,e,a,n,E,U){const V=(0,o.up)("Navbar"),$=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("body",null,[(0,o.Wm)(V),(0,o._)("div",l,[(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("div",d,[(0,o._)("h1",u,[(0,o.Uk)(" Id_Cena: "),(0,o._)("span",h,(0,i.zw)(E.conceptoId),1)]),(0,o._)("h1",g,[(0,o.Uk)(" Estado: "),(0,o._)("span",p,(0,i.zw)(E.estadoConcepto),1)]),(0,o._)("h1",m,[(0,o.Uk)(" Carrito: "),(0,o.Wm)($,{to:"/carrito"},{default:(0,o.w5)((()=>[v])),_:1})])])]),(0,o._)("div",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(E.articulos,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"col",key:t.id_articulo},[(0,o._)("div",_,[(0,o._)("img",{src:t.imagenURL,class:"card-img-top imagen",alt:t.nombre},null,8,w),(0,o._)("div",y,[(0,o._)("h4",b,(0,i.zw)(t.nombre),1),(0,o._)("p",k,(0,i.zw)(t.descripcion),1),(0,o._)("div",I,[C,(0,o._)("span",z,(0,i.zw)(t.precio)+" €",1)]),(0,o._)("div",A,[(0,o.wy)((0,o._)("input",{type:"number",class:"input",placeholder:"Cantidad",onFocus:e=>U.resetEstado(t.id_articulo),"onUpdate:modelValue":e=>E.selectedQuantities[t.id_articulo]=e,min:"1"},null,40,x),[[s.nr,E.selectedQuantities[t.id_articulo]]]),(0,o._)("button",{class:"btn btn-primary",onClick:e=>U.addToBasket(t)},[(0,o.Uk)(" Añadir "),H],8,B)]),E.errors[t.id_articulo]?((0,o.wg)(),(0,o.iD)("div",M,[S,(0,o.Uk)(" Por favor, introduce una cantidad válida. ")])):(0,o.kq)("",!0)])])])))),128))])])])])}a(7658);var U=a(5815),V=a(6052),$=a.n(V),D={name:"vistaArticulos",components:{Navbar:U.Z},data(){return{usuarioinvitCon:"",conceptoId:"",usuarioinvitId:"",selectedQuantities:{},estadoConcepto:"",articulos:[],conceptos:[],errors:{}}},methods:{async addToBasket(t){this.resetEstado;const e=this.selectedQuantities[t.id_articulo];if("undefined"===typeof e)return void(this.errors[t.id_articulo]=!0);this.errors[t.id_articulo]=!1,console.log("Artículo agregado al carrito con cantidad:",e),console.log(this.usuarioinvitId);let a=null;"null"===this.usuarioinvitId&&"undefined"===this.usuarioinvitId&&""===this.usuarioinvitId||(a=this.usuarioinvitId),console.log(a);const o=localStorage.getItem("user-token"),i=await fetch("http://127.0.0.1:8000/api/carrito/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({cantidad:e,id_concepto:this.conceptoId,id_articulo:t.id_articulo,id_invitado:parseInt(a)})}),s=await i.json();console.log(s),s.message?alert("articulo agregado"):this.error=!0},resetEstado(t){this.errors[t]=!1},async carregarArticulos(){const t=localStorage.getItem("user-token");fetch("http://127.0.0.1:8000/api/articulos",{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((t=>t.json())).then((t=>{console.log(t),this.articulos=t})).catch((t=>{console.error(t)}))},async carregarInvitados(t){const e=localStorage.getItem("user-token"),a=await fetch(`http://127.0.0.1:8000/api/usuariosinvitados/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),o=await a.json();return console.log(o),console.log(o.id_concepto),o.id_concepto},async carregarConceptos(t){const e=localStorage.getItem("user-token"),a=$().decode(e);console.log(a);const o=a.id;try{const a=await fetch(`http://127.0.0.1:8000/api/concepto/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),i=await a.json();console.log(i);let s=i,n=!1;if((s.id_usuario===o&&0==s.estado||s.id_concepto===this.usuarioinvitCon&&0==s.estado)&&(n=!0),n)this.estadoConcepto="impagado",this.carregarArticulos();else{const t=document.getElementById("artic");t.style.display="none",this.$swal({title:"Alerta",text:"No puedes elegir articulos si no estas creado o invitado a una cena",icon:"info",confirmButtonText:"OK"}).then((()=>{this.$router.push({name:"vistaCliente"})}))}}catch(i){console.error(i)}}},async mounted(){const t=localStorage.getItem("user-token");if(null===t)return void this.$router.push({name:"LoginView"});const e=localStorage.getItem("usuarioInvitado");this.usuarioinvitId=e,this.conceptoId=localStorage.getItem("conceptoId"),console.log(e);const a=localStorage.getItem("idUsario"),o=$().decode(t),i=o.id,s=document.getElementById("estadoCo");s.style.display=i==a?"none":"block",e&&"null"!=e&&"undefined"!=e&&""!=e?(this.usuarioinvitCon=await this.carregarInvitados(e),this.carregarConceptos(this.conceptoId)):this.carregarConceptos(this.conceptoId)}},W=a(89);const L=(0,W.Z)(D,[["render",E],["__scopeId","data-v-090f0655"]]);var j=L}}]);
//# sourceMappingURL=629.0ebf5db4.js.map