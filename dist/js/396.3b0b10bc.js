"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[396],{5815:function(e,t,o){o.d(t,{Z:function(){return I}});var r=o(3396),l=o(9242),s=o.p+"img/logo.f337e303.png";const a=e=>((0,r.dD)("data-v-3829407f"),e=e(),(0,r.Cn)(),e),i={id:"logo-cli",class:"logo",style:{display:"none"}},n=a((()=>(0,r._)("img",{class:"logoImg",src:s,alt:"COMBOI"},null,-1))),c={id:"cliente-link",class:"container",style:{display:"none"}},d=a((()=>(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,r._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),u=a((()=>(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,r._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,r._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),m=[u],p={id:"logo-admin",class:"logo",style:{display:"none"}},h=a((()=>(0,r._)("img",{class:"logoImg",src:s,alt:"COMBOI"},null,-1))),g={id:"admin-link",class:"container",style:{display:"none"}},b=a((()=>(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,r._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),_=a((()=>(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,r._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,r._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),f=[_];function v(e,t,o,s,a,u){const _=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",null,[(0,r._)("div",i,[(0,r.Wm)(_,{to:"/cliente",class:"navbar-brand font-effect-3d"},{default:(0,r.w5)((()=>[n])),_:1})]),(0,r._)("div",c,[(0,r.Wm)(_,{to:"/cliente"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),(0,r.Wm)(_,{to:"/about"},{default:(0,r.w5)((()=>[(0,r.Uk)("About")])),_:1}),(0,r.Wm)(_,{to:"/contact"},{default:(0,r.w5)((()=>[(0,r.Uk)("Contact")])),_:1}),(0,r.Wm)(_,{to:"/perfil/"+a.clienteActual},{default:(0,r.w5)((()=>[d])),_:1},8,["to"]),(0,r._)("a",{onClick:t[0]||(t[0]=(0,l.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},m)]),(0,r._)("div",p,[(0,r.Wm)(_,{to:"/admin",class:"navbar-brand font-effect-3d"},{default:(0,r.w5)((()=>[h])),_:1})]),(0,r._)("div",g,[(0,r.Wm)(_,{to:"/admin"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),(0,r.Wm)(_,{to:"/perfil/"+a.clienteActual},{default:(0,r.w5)((()=>[b])),_:1},8,["to"]),(0,r._)("a",{onClick:t[1]||(t[1]=(0,l.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},f)])])}o(7658);var y=o(6052),w=o.n(y),A={name:"navBar",data(){return{clienteActual:null}},methods:{async carregarDatos(){const e=localStorage.getItem("user-token"),t=w().decode(e),o=t.id;this.clienteActual=o;const r=t.role;if("ROLE_ADMIN"===r){const e=document.getElementById("logo-admin");e.style.display="block";const t=document.getElementById("admin-link");t.style.display="block"}else{const e=document.getElementById("logo-cli");e.style.display="block";const t=document.getElementById("cliente-link");t.style.display="block"}},cerrarSesion(){localStorage.clear(),this.$router.push({name:"LoginView"})}},async mounted(){let e=localStorage.getItem("user-token");e?this.carregarDatos():this.$router.push({name:"LoginView"})}},k=o(89);const E=(0,k.Z)(A,[["render",v],["__scopeId","data-v-3829407f"]]);var I=E},4722:function(e,t,o){o.r(t),o.d(t,{default:function(){return Oe}});var r=o(3396),l=o(9242),s=o(7139);const a=e=>((0,r.dD)("data-v-89b1055e"),e=e(),(0,r.Cn)(),e),i={class:"container-xxl mt-5"},n=a((()=>(0,r._)("div",{class:"title text-center"},[(0,r._)("h1",{class:"display-5"},[(0,r._)("i",{class:"fas fa-user-alt text-success"}),(0,r.Uk)(),(0,r._)("strong",null,"Administracion de Articulos")])],-1))),c={class:"main row"},d={id:"add",class:"col-sm-12 col-md-4",style:{display:"none"}},u=a((()=>(0,r._)("div",{class:"title text-center"},[(0,r._)("h2",null,[(0,r._)("strong",null,"Añadir Articulo")])],-1))),m={class:"form-group"},p=a((()=>(0,r._)("label",{for:"nombre"},"Articulo",-1))),h=a((()=>(0,r._)("br",null,null,-1))),g={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},b={class:"form-group"},_=a((()=>(0,r._)("label",{for:"descripcion"},"Descripción",-1))),f=a((()=>(0,r._)("br",null,null,-1))),v={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},y={class:"form-group"},w=a((()=>(0,r._)("label",{for:"precio"},"Precio",-1))),A=a((()=>(0,r._)("br",null,null,-1))),k={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},E={class:"form-group"},I=a((()=>(0,r._)("label",{for:"foto"},"Foto",-1))),C=a((()=>(0,r._)("br",null,null,-1))),D={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},x={class:"form-group"},B=a((()=>(0,r._)("br",null,null,-1))),z=a((()=>(0,r._)("i",{class:"fa fa-plus-square","aria-hidden":"true"},null,-1))),M=a((()=>(0,r._)("br",null,null,-1))),U=a((()=>(0,r._)("br",null,null,-1))),S=a((()=>(0,r._)("i",{class:"fa fa-times","aria-hidden":"true"},null,-1))),F=a((()=>(0,r._)("br",null,null,-1))),$=a((()=>(0,r._)("br",null,null,-1))),j={id:"edit",class:"col-sm-12 col-md-4",style:{display:"none"}},L=a((()=>(0,r._)("div",{class:"title text-center"},[(0,r._)("h2",null,[(0,r._)("strong",null,"Actualizar Articulo")])],-1))),q={class:"form-group"},O=a((()=>(0,r._)("label",{for:"nombre"},"Articulo",-1))),V=a((()=>(0,r._)("br",null,null,-1))),T={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},K={class:"form-group"},W=a((()=>(0,r._)("label",{for:"descripcion"},"Descripción",-1))),N=a((()=>(0,r._)("br",null,null,-1))),R={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},H={class:"form-group"},P=a((()=>(0,r._)("label",{for:"precio"},"Precio",-1))),G=a((()=>(0,r._)("br",null,null,-1))),Z={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},J={class:"form-group"},Y=a((()=>(0,r._)("label",{for:"foto"},"Foto",-1))),Q=a((()=>(0,r._)("br",null,null,-1))),X={class:"form-group"},ee=a((()=>(0,r._)("br",null,null,-1))),te=a((()=>(0,r._)("i",{class:"fa fa-refresh","aria-hidden":"true"},null,-1))),oe=a((()=>(0,r._)("br",null,null,-1))),re=a((()=>(0,r._)("br",null,null,-1))),le=a((()=>(0,r._)("i",{class:"fa fa-times","aria-hidden":"true"},null,-1))),se=a((()=>(0,r._)("br",null,null,-1))),ae=a((()=>(0,r._)("br",null,null,-1))),ie={id:"mostrar",class:"col-sm-12 col-md-4",style:{display:"none"}},ne={class:"flex flex-wrap w-full sm:w-1/2 md:w-1/3 flex-col -m-3 shadow-lg p-3 mb-5 bg-white rounded"},ce={class:"bg-white rounded-lg shadow-lg overflow-hidden flex-1 flex flex-col"},de={class:"bg-cover h-48"},ue=["src","alt"],me={class:"p-4 flex-1 flex flex-col",style:{}},pe={class:"mb-4 text-2xl"},he={class:"mb-4 text-grey-darker text-sm flex-1"},ge=a((()=>(0,r._)("b",null,"ID de Articulo: ",-1))),be=a((()=>(0,r._)("b",null,"Descripción : ",-1))),_e=a((()=>(0,r._)("b",null,"Precio : ",-1))),fe={id:"tdArticulos",class:"mt-5 shadow-lg p-3 mb-5 bg-white rounded"},ve={key:0,class:"alert alert-info shadow-lg p-3 mb-5 rounded",role:"alert"},ye={key:1,class:"alert alert-success shadow-lg p-3 mb-5 rounded",role:"alert"},we={class:"table table-striped mt-5"},Ae=a((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"Id"),(0,r._)("th",null,"Articulo"),(0,r._)("th",null,"Precio"),(0,r._)("th",null,"Acciones")])],-1))),ke=["onClick"],Ee=a((()=>(0,r._)("i",{class:"fa fa-eye"},null,-1))),Ie=[Ee],Ce=["onClick"],De=a((()=>(0,r._)("i",{class:"fa fa-pencil"},null,-1))),xe=[De],Be=["onClick"],ze=a((()=>(0,r._)("i",{class:"fa fa-trash"},null,-1))),Me=[ze];function Ue(e,t,o,a,Ee,De){const ze=(0,r.up)("Navbar");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(ze),(0,r._)("div",i,[n,(0,r._)("div",c,[(0,r._)("div",d,[(0,r._)("form",{id:"articulos-form",class:"shadow-lg p-3 mb-5 bg-white rounded",autocomplete:"off",onSubmit:t[14]||(t[14]=(0,l.iM)(((...e)=>De.addArticulo&&De.addArticulo(...e)),["prevent"]))},[u,(0,r._)("div",m,[p,(0,r.wy)((0,r._)("input",{type:"text",id:"nombre",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.nombreInvalido}]),"onUpdate:modelValue":t[0]||(t[0]=e=>Ee.articuls.nombre=e),ref:"nombre",onFocus:t[1]||(t[1]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[2]||(t[2]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articuls.nombre]]),h,Ee.error&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",g," ¡Debes rellenar todos los campos! ")):(0,r.kq)("",!0)]),(0,r._)("div",b,[_,(0,r.wy)((0,r._)("input",{type:"text",id:"descripcion",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.descripcionInvalido}]),"onUpdate:modelValue":t[3]||(t[3]=e=>Ee.articuls.descripcion=e),onFocus:t[4]||(t[4]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[5]||(t[5]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articuls.descripcion]]),f,Ee.error1&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",v," ¡Debes rellenar todos los campos! ")):(0,r.kq)("",!0)]),(0,r._)("div",y,[w,(0,r.wy)((0,r._)("input",{type:"number",id:"precio",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.precioInvalido}]),"onUpdate:modelValue":t[6]||(t[6]=e=>Ee.articuls.precio=e),onFocus:t[7]||(t[7]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[8]||(t[8]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articuls.precio]]),A,Ee.error2&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",k," ¡El precio no debe ser menor que 1€ o Vacio! ")):(0,r.kq)("",!0)]),(0,r._)("div",E,[I,(0,r._)("input",{type:"file",id:"foto",class:"form-control",onChange:t[9]||(t[9]=(...e)=>De.onFileAdd&&De.onFileAdd(...e)),accept:"image/*",onFocus:t[10]||(t[10]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[11]||(t[11]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,32),C,Ee.error3&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",D," ¡Necesitas seleccionar un foto! ")):(0,r.kq)("",!0)]),(0,r._)("div",x,[B,(0,r._)("button",{type:"submit",class:"btn btn-success btn-lg",onClick:t[12]||(t[12]=(0,l.iM)(((...e)=>De.addArticulo&&De.addArticulo(...e)),["prevent"]))},[z,(0,r.Uk)(" Guardar")]),M,U,(0,r._)("button",{type:"submit",class:"btn btn-danger btn-lg",onClick:t[13]||(t[13]=(0,l.iM)((e=>De.cancelar()),["prevent"]))},[S,(0,r.Uk)(" Cancelar")]),F,$])],32)]),(0,r._)("div",j,[(0,r._)("form",{id:"articulos-form",class:"shadow-lg p-3 mb-5 bg-white rounded",autocomplete:"off",onSubmit:t[29]||(t[29]=(0,l.iM)(((...e)=>De.updArticulo&&De.updArticulo(...e)),["prevent"]))},[L,(0,r._)("div",q,[O,(0,r.wy)((0,r._)("input",{type:"text",id:"nombre",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.nombreInvalido}]),"onUpdate:modelValue":t[15]||(t[15]=e=>Ee.articul.nombre=e),ref:"nombre",onFocus:t[16]||(t[16]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[17]||(t[17]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articul.nombre]]),V,Ee.error&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",T," ¡Debes rellenar todos los campos! ")):(0,r.kq)("",!0)]),(0,r._)("div",K,[W,(0,r.wy)((0,r._)("input",{type:"text",id:"descripcion",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.descripcionInvalido}]),"onUpdate:modelValue":t[18]||(t[18]=e=>Ee.articul.descripcion=e),onFocus:t[19]||(t[19]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[20]||(t[20]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articul.descripcion]]),N,Ee.error1&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",R," ¡Debes rellenar todos los campos! ")):(0,r.kq)("",!0)]),(0,r._)("div",H,[P,(0,r.wy)((0,r._)("input",{type:"number",id:"precio",class:(0,s.C_)(["form-control",{"is-invalid":Ee.procesando&&De.precioInvalido}]),"onUpdate:modelValue":t[21]||(t[21]=e=>Ee.articul.precio=e),onFocus:t[22]||(t[22]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[23]||(t[23]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,34),[[l.nr,Ee.articul.precio]]),G,Ee.error2&&Ee.procesando?((0,r.wg)(),(0,r.iD)("div",Z," ¡El precio no debe ser menor que 1€ o Vacio! ")):(0,r.kq)("",!0)]),(0,r._)("div",J,[Y,(0,r._)("input",{type:"file",id:"foto",class:"form-control",onChange:t[24]||(t[24]=(...e)=>De.onFileChange&&De.onFileChange(...e)),accept:"image/*",onFocus:t[25]||(t[25]=(...e)=>De.resetEstado&&De.resetEstado(...e)),onKeypress:t[26]||(t[26]=(...e)=>De.resetEstado&&De.resetEstado(...e))},null,32),Q]),(0,r._)("div",X,[ee,(0,r._)("button",{type:"submit",class:"btn btn-primary btn-lg",onClick:t[27]||(t[27]=(0,l.iM)((e=>De.updArticulo(Ee.articul.id_articulo)),["prevent"]))},[te,(0,r.Uk)(" Actualizar")]),oe,re,(0,r._)("button",{type:"submit",class:"btn btn-danger btn-lg",onClick:t[28]||(t[28]=(0,l.iM)((e=>De.cancelar()),["prevent"]))},[le,(0,r.Uk)(" Cancelar")]),se,ae])],32)]),(0,r._)("div",ie,[(0,r._)("div",ne,[(0,r._)("div",ce,[(0,r._)("div",de,[(0,r._)("img",{class:"img-fluid",src:Ee.articulo.imagenURL,alt:Ee.articulo.nombre},null,8,ue)]),(0,r._)("div",me,[(0,r._)("h3",pe,(0,s.zw)(Ee.articulo.nombre),1),(0,r._)("div",he,[(0,r._)("p",null,[ge,(0,r.Uk)(" "+(0,s.zw)(Ee.articulo.id_articulo),1)]),(0,r._)("p",null,[be,(0,r.Uk)(" "+(0,s.zw)(Ee.articulo.descripcion),1)]),(0,r._)("p",null,[_e,(0,r.Uk)(" "+(0,s.zw)(Ee.articulo.precio)+" €",1)])]),(0,r._)("input",{type:"submit",value:"Ocultar",class:"btn btn-danger btn-block add-btn",onClick:t[30]||(t[30]=(0,l.iM)((e=>De.cancelar()),["prevent"]))})])])])]),(0,r._)("div",fe,[Ee.articulos&&Ee.articulos.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ve," No se han agregado Articulos ")),Ee.correcto?((0,r.wg)(),(0,r.iD)("div",ye,(0,s.zw)(Ee.mensaje),1)):(0,r.kq)("",!0),(0,r._)("table",we,[Ae,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Ee.articulos,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,s.zw)(e.id_articulo),1),(0,r._)("td",null,(0,s.zw)(e.nombre),1),(0,r._)("td",null,(0,s.zw)(e.precio)+" €",1),(0,r._)("td",null,[(0,r._)("button",{class:"btn btn-success mx-2",onClick:(0,l.iM)((t=>De.mostrararticulo(e.id_articulo)),["prevent"])},Ie,8,ke),(0,r._)("button",{class:"btn btn-primary mr-2",onClick:(0,l.iM)((t=>De.editArticulo(e.id_articulo)),["prevent"])},xe,8,Ce),(0,r._)("button",{class:"btn btn-danger mx-2",onClick:(0,l.iM)((t=>De.deleteArticulos(e.id_articulo)),["prevent"])},Me,8,Be)])])))),128))])]),(0,r._)("button",{class:"btn btn-link btn-lg addArt",onClick:t[31]||(t[31]=(0,l.iM)((e=>De.anadirArticulo()),["prevent"]))},"Añadir Articulo"),(0,r._)("button",{class:"btn btn-link btn-lg addArt",onClick:t[32]||(t[32]=(0,l.iM)((e=>De.deleteAllArticulos()),["prevent"]))},"Eliminar Todos los Articulos")])])])],64)}o(7658);var Se=o(5815),Fe=o(6052),$e=o.n(Fe),je={name:"vistaAdmin",components:{Navbar:Se.Z},data(){return{procesando:!1,correcto:!1,error:!1,error1:!1,error2:!1,error3:!1,mensaje:"",articul:{id_articulo:"",nombre:"",descripcion:"",precio:"",archivo_imagen:"",file:""},articuls:{nombre:"",descripcion:"",precio:"",archivo_imagen:"",file:""},articulos:[],articulo:[],compruebaImage:""}},methods:{onFileAdd(e){this.compruebaImage=e.target.files[0];const t=e.target.files[0];if(console.log(t),t){const e=new FileReader;e.readAsDataURL(t),e.onload=e=>{this.articuls.archivo_imagen=t.name,this.articuls.file=e.target.result}}},onFileChange(e){this.compruebaImage=e.target.files[0];const t=e.target.files[0];if(console.log(t),t){const e=new FileReader;e.readAsDataURL(t),e.onload=e=>{this.articul.archivo_imagen=t.name,this.articul.file=e.target.result}}},anadirArticulo(){this.resetEstado();const e=document.getElementById("tdArticulos");e.setAttribute("class","col-sm-12 col-md-8 shadow-lg p-3 mb-5 bg-white rounded");const t=document.getElementById("mostrar");t.style.display="none";const o=document.getElementById("add");o.style.display="block";const r=document.getElementById("edit");r.style.display="none"},async editArticulo(e){this.resetEstado();const t=document.getElementById("tdArticulos");t.setAttribute("class","col-sm-12 col-md-8 shadow-lg p-3 mb-5 bg-white rounded");const o=document.getElementById("mostrar");o.style.display="none";const r=document.getElementById("add");r.style.display="none";const l=document.getElementById("edit");l.style.display="block";const s=localStorage.getItem("user-token");fetch(`http://127.0.0.1:8000/api/articulos/${e}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}}).then((e=>e.json())).then((e=>{console.log(e),this.articul=e})).catch((e=>{console.error(e)}))},mostrararticulo(e){this.resetEstado();const t=document.getElementById("tdArticulos");t.setAttribute("class","col-sm-12 col-md-8 shadow-lg p-3 mb-5 bg-white rounded");const o=document.getElementById("mostrar");o.style.display="block";const r=document.getElementById("add");r.style.display="none";const l=document.getElementById("edit");l.style.display="none",this.carregarDatosArticulo(e)},cancelar(){this.resetEstado();const e=document.getElementById("tdArticulos");e.setAttribute("class","mt-5 shadow-lg p-3 mb-5 bg-white rounded");const t=document.getElementById("mostrar");t.style.display="none";const o=document.getElementById("add");o.style.display="none";const r=document.getElementById("edit");r.style.display="none"},async deleteAllArticulos(){this.resetEstado();const e=localStorage.getItem("user-token"),t=await fetch("http://127.0.0.1:8000/api/articulos/delete",{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),o=await t.json();console.log(o),o.message&&(this.cancelar(),this.mensaje=o.message,this.correcto=!0,this.carregarDatos())},async deleteArticulos(e){this.resetEstado();const t=localStorage.getItem("user-token"),o=await fetch(`http://127.0.0.1:8000/api/articulos/delete/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),r=await o.json();console.log(r),r.message&&(this.mensaje=r.message,this.correcto=!0,this.carregarDatos())},async addArticulo(){if(this.procesando=!0,this.resetEstado(),this.nombreInvalidoAdd)return void(this.error=!0);if(this.descripcionInvalidoAdd)return void(this.error1=!0);if(this.precioInvalidoAdd)return void(this.error2=!0);if(!this.compruebaImage)return this.articuls.archivo_imagen="",void(this.error3=!0);this.onFileAdd,this.$refs.nombre.focus();const e=localStorage.getItem("user-token"),t=await fetch("http://127.0.0.1:8000/api/articulos/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({nombre:this.articuls.nombre,descripcion:this.articuls.descripcion,precio:this.articuls.precio,archivo_imagen:this.articuls.archivo_imagen,file:this.articuls.file})}),o=await t.json();console.log(o),o.message?(this.error=!1,this.error1=!1,this.error2=!1,this.error3=!1,this.mensaje=o.message,this.cancelar(),this.procesando=!1,this.correcto=!0,this.carregarDatos()):alert("Ocurrió un error"),this.articuls={nombre:"",descripcion:"",precio:"",archivo_imagen:"",file:""},this.compruebaImage=null},async carregarDatos(){const e=localStorage.getItem("user-token");fetch("http://127.0.0.1:8000/api/articulos",{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>{console.log(e),this.articulos=e})).catch((e=>{console.error(e)}))},async carregarDatosArticulo(e){const t=localStorage.getItem("user-token");fetch(`http://127.0.0.1:8000/api/articulos/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((e=>e.json())).then((e=>{console.log(e),this.articulo=e})).catch((e=>{console.error(e)}))},async updArticulo(e){if(this.procesando=!0,this.resetEstado(),this.nombreInvalido)return void(this.error=!0);if(this.descripcionInvalido)return void(this.error1=!0);if(this.precioInvalido)return void(this.error2=!0);this.onFileChange,this.$refs.nombre.focus();const t=localStorage.getItem("user-token"),o=await fetch(`http://127.0.0.1:8000/api/articulos/update/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({nombre:this.articul.nombre,descripcion:this.articul.descripcion,precio:this.articul.precio,archivo_imagen:this.articul.archivo_imagen,file:this.articul.file})}),r=await o.json();console.log(r),r.message?(this.error=!1,this.error1=!1,this.error2=!1,this.error3=!1,this.mensaje=r.message,this.cancelar(),this.procesando=!1,this.correcto=!0,this.carregarDatos()):alert("Ocurrió un error"),this.compruebaImage=null},resetEstado(){this.correcto=!1,this.error=!1,this.error1=!1,this.error2=!1,this.error3=!1}},computed:{nombreInvalidoAdd(){return this.articuls.nombre.length<1},descripcionInvalidoAdd(){return this.articuls.descripcion.length<1},precioInvalidoAdd(){return this.articuls.precio<1},nombreInvalido(){return this.articul.nombre.length<1},descripcionInvalido(){return this.articul.descripcion.length<1},precioInvalido(){return this.articul.precio<1}},async mounted(){const e=localStorage.getItem("user-token");if(e){const t=$e().decode(e);console.log(t);let o=t.role;"ROLE_ADMIN"===o?this.carregarDatos():this.$router.push({name:"LoginView"})}else this.$router.push({name:"LoginView"})}},Le=o(89);const qe=(0,Le.Z)(je,[["render",Ue],["__scopeId","data-v-89b1055e"]]);var Oe=qe}}]);
//# sourceMappingURL=396.3b0b10bc.js.map