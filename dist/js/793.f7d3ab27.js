"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[793],{5815:function(e,a,t){t.d(a,{Z:function(){return x}});var o=t(3396),i=t(9242),n=t.p+"img/logo.f337e303.png";const l=e=>((0,o.dD)("data-v-3829407f"),e=e(),(0,o.Cn)(),e),r={id:"logo-cli",class:"logo",style:{display:"none"}},s=l((()=>(0,o._)("img",{class:"logoImg",src:n,alt:"COMBOI"},null,-1))),d={id:"cliente-link",class:"container",style:{display:"none"}},c=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),u=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),g=[u],h={id:"logo-admin",class:"logo",style:{display:"none"}},p=l((()=>(0,o._)("img",{class:"logoImg",src:n,alt:"COMBOI"},null,-1))),m={id:"admin-link",class:"container",style:{display:"none"}},v=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),f=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,o._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),_=[f];function w(e,a,t,n,l,u){const f=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",null,[(0,o._)("div",r,[(0,o.Wm)(f,{to:"/cliente",class:"navbar-brand font-effect-3d"},{default:(0,o.w5)((()=>[s])),_:1})]),(0,o._)("div",d,[(0,o.Wm)(f,{to:"/cliente"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),(0,o.Wm)(f,{to:"/about"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1}),(0,o.Wm)(f,{to:"/contact"},{default:(0,o.w5)((()=>[(0,o.Uk)("Contact")])),_:1}),(0,o.Wm)(f,{to:"/perfil/"+l.clienteActual},{default:(0,o.w5)((()=>[c])),_:1},8,["to"]),(0,o._)("a",{onClick:a[0]||(a[0]=(0,i.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},g)]),(0,o._)("div",h,[(0,o.Wm)(f,{to:"/admin",class:"navbar-brand font-effect-3d"},{default:(0,o.w5)((()=>[p])),_:1})]),(0,o._)("div",m,[(0,o.Wm)(f,{to:"/admin"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),(0,o.Wm)(f,{to:"/perfil/"+l.clienteActual},{default:(0,o.w5)((()=>[v])),_:1},8,["to"]),(0,o._)("a",{onClick:a[1]||(a[1]=(0,i.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},_)])])}t(7658);var C=t(6052),I=t.n(C),y={name:"navBar",data(){return{clienteActual:null}},methods:{async carregarDatos(){const e=localStorage.getItem("user-token"),a=I().decode(e),t=a.id;this.clienteActual=t;const o=a.role;if("ROLE_ADMIN"===o){const e=document.getElementById("logo-admin");e.style.display="block";const a=document.getElementById("admin-link");a.style.display="block"}else{const e=document.getElementById("logo-cli");e.style.display="block";const a=document.getElementById("cliente-link");a.style.display="block"}},cerrarSesion(){localStorage.clear(),this.$router.push({name:"LoginView"})}},async mounted(){let e=localStorage.getItem("user-token");e?this.carregarDatos():this.$router.push({name:"LoginView"})}},b=t(89);const k=(0,b.Z)(y,[["render",w],["__scopeId","data-v-3829407f"]]);var x=k},120:function(e,a,t){t.r(a),t.d(a,{default:function(){return P}});var o=t(3396),i=t(7139),n=t(9242);const l=e=>((0,o.dD)("data-v-7b5c7708"),e=e(),(0,o.Cn)(),e),r={class:"fundoTransp"},s=l((()=>(0,o._)("div",{class:"title text-center"},[(0,o._)("h1",{class:"font-effect-fire-animation display-5"},"!Bienvendido a COMBOI!")],-1))),d={class:"main row"},c={class:"mt-5"},u={id:"carouselExampleIndicators",class:"carousel slide","data-ride":"carousel"},g={class:"carousel-indicators"},h=["data-slide-to"],p={class:"carousel-inner"},m=["alt","src"],v=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-chevron-left",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"})],-1))),f=l((()=>(0,o._)("span",{class:"sr-only"},"Previous",-1))),_=[v,f],w=l((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-chevron-right",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"})],-1))),C=l((()=>(0,o._)("span",{class:"sr-only"},"Next",-1))),I=[w,C],y={class:"mt-5"},b={class:"d-flex justify-content-center"},k=l((()=>(0,o._)("i",{class:"fa fa-pencil-square","aria-hidden":"true"},null,-1))),x=l((()=>(0,o._)("i",{class:"fa fa-plus-circle","aria-hidden":"true"},null,-1))),A={class:"d-flex justify-content-center alertError"},S={key:0,class:"alert alert-warning shadow-lg p-3 mb-5 rounded",role:"alert"},z=l((()=>(0,o._)("i",{class:"fas fa-exclamation-triangle",style:{"font-size":"24px"}},null,-1))),E={id:"inpIdCena",style:{display:"none"}},M=l((()=>(0,o._)("br",null,null,-1))),j=l((()=>(0,o._)("br",null,null,-1))),B={class:"d-flex justify-content-center"},D={class:"alertError"},U={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},$=l((()=>(0,o._)("i",{class:"fas fa-exclamation-triangle",style:{"font-size":"24px"}},null,-1))),O={class:"alertError"},W={key:0,class:"alert alert-danger shadow-lg p-3 mb-5 rounded",role:"alert"},L=l((()=>(0,o._)("i",{class:"fas fa-exclamation-triangle",style:{"font-size":"24px"}},null,-1)));function T(e,a,t,l,v,f){const w=(0,o.up)("Navbar");return(0,o.wg)(),(0,o.iD)("body",null,[(0,o._)("div",r,[(0,o.Wm)(w),s,(0,o._)("div",d,[(0,o._)("div",c,[(0,o._)("div",u,[(0,o._)("ol",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.imagenes.length,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,"data-target":"#carouselExampleIndicators","data-slide-to":e-1,class:(0,i.C_)({active:e-1===v.indiceImagenActual})},null,10,h)))),128))]),(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.imagenes,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a,class:(0,i.C_)(["carousel-item",{active:a===v.indiceImagenActual}])},[(0,o._)("img",{class:"imagen",alt:e.titulo,src:"http://127.0.0.1:8000/api/images/"+e.img,style:{width:"900px",height:"300px"}},null,8,m)],2)))),128))]),(0,o._)("a",{class:"carousel-control-prev",href:"#carouselExampleIndicators",role:"button","data-slide":"prev",onClick:a[0]||(a[0]=(...e)=>f.retroceder&&f.retroceder(...e))},_),(0,o._)("a",{class:"carousel-control-next",href:"#carouselExampleIndicators",role:"button","data-slide":"next",onClick:a[1]||(a[1]=(...e)=>f.avanzar&&f.avanzar(...e))},I)])]),(0,o._)("div",y,[(0,o._)("div",b,[(0,o._)("form",{onSubmit:a[3]||(a[3]=(0,n.iM)(((...e)=>f.crearCena&&f.crearCena(...e)),["prevent"]))},[(0,o._)("button",{class:"button1 d-inline-block mx-4",onClick:a[2]||(a[2]=(0,n.iM)(((...e)=>f.crearCena&&f.crearCena(...e)),["prevent"]))},[k,(0,o.Uk)(" Crear Cena ")])],32),(0,o._)("button",{class:"button2 d-inline-block mx-4",onClick:a[4]||(a[4]=(0,n.iM)((e=>f.showInputAddCena()),["prevent"]))},[x,(0,o.Uk)(" AÃ±adir Cena ")])]),(0,o._)("div",A,[v.error&&v.procesando?((0,o.wg)(),(0,o.iD)("div",S,[z,(0,o.Uk)(" Vuelve crear cena! ")])):(0,o.kq)("",!0)])]),(0,o._)("div",E,[M,j,(0,o._)("div",B,[(0,o._)("form",{onSubmit:a[9]||(a[9]=(0,n.iM)(((...e)=>f.addCena&&f.addCena(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"number",id:"addIdCena",name:"addIdCena",autocomplete:"off",class:"input d-inline-block mx-4",placeholder:"ID de La Cena","onUpdate:modelValue":a[5]||(a[5]=e=>v.addIdCena=e),ref:"addIdCena",onFocus:a[6]||(a[6]=(...e)=>f.resetEstado&&f.resetEstado(...e)),onKeypress:a[7]||(a[7]=(...e)=>f.resetEstado&&f.resetEstado(...e))},null,544),[[n.nr,v.addIdCena]]),(0,o._)("button",{class:"button3 d-inline-block mx-4",onClick:a[8]||(a[8]=(0,n.iM)((e=>f.addCena(v.addIdCena)),["prevent"]))},"Enviar")],32)]),(0,o._)("div",D,[v.error1&&v.procesando?((0,o.wg)(),(0,o.iD)("div",U,[$,(0,o.Uk)(" El ID de la cena no es valido! ")])):(0,o.kq)("",!0)]),(0,o._)("div",O,[v.error2&&v.procesando?((0,o.wg)(),(0,o.iD)("div",W,[L,(0,o.Uk)(" El ID de la cena no existe! ")])):(0,o.kq)("",!0)])])])])])}t(7658);var H=t(5815),N=t(6052),V=t.n(N),q={name:"vistaCliente",components:{Navbar:H.Z},data(){return{imagenes:[{img:"1.png",titulo:"bocadillos"},{img:"2.jpg",titulo:"burger"},{img:"3.jpg",titulo:"fanta"},{img:"4.jpg",titulo:"coca"},{img:"5.jpg",titulo:"corona"},{img:"6.jpg",titulo:"ice cream"},{img:"7.jpg",titulo:"Mousse"},{img:"8.jpg",titulo:"pizza"},{img:"9.jpg",titulo:"postre"},{img:"10.jpg",titulo:"postre frutas"},{img:"11.jpg",titulo:"tacos"},{img:"12.jpg",titulo:"zumo"}],procesando:!1,error:!1,error1:!1,error2:!1,addIdCena:"",indiceImagenActual:0,idCena:""}},created(){setInterval((()=>{this.indiceImagenActual=(this.indiceImagenActual+1)%this.imagenes.length}),5e3)},methods:{avanzar(){this.indiceImagenActual=(this.indiceImagenActual+1)%this.imagenes.length},retroceder(){this.indiceImagenActual=(this.indiceImagenActual+this.imagenes.length-1)%this.imagenes.length},showInputAddCena(){const e=document.getElementById("inpIdCena");e.style.display="block"},genIdCena(){var e="0123456789";let a="";do{a="";for(let t=0;t<10;t++)a+=e[Math.floor(10*Math.random())]}while(a.startsWith("0"));this.idCena=a,console.log(this.idCena)},async crearCena(){this.genIdCena();const e=localStorage.getItem("user-token"),a=V().decode(e);console.log(a);const t=a.id,o=await fetch("http://127.0.0.1:8000/api/concepto/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({id_concepto:parseInt(this.idCena),id_usuario:t})}),i=await o.json();console.log(i),i.message?(localStorage.setItem("idUsario",t),localStorage.setItem("conceptoId",this.idCena),this.$router.push({name:"vistaArticulos"}),this.error=!1):this.error=!0},async carregarConceptos(e){const a=localStorage.getItem("user-token"),t=await fetch(`http://127.0.0.1:8000/api/concepto/${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),o=await t.json();return o.id_usuario},async addUsuarioInvitado(){const e=localStorage.getItem("user-token"),a=V().decode(e),t=a.id,o=await this.carregarConceptos(this.addIdCena);if(o!==t){const a=await fetch("http://127.0.0.1:8000/api/usuariosinvitados/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({id_usuario:t,id_concepto:this.addIdCena})}),o=await a.json();return o.id}return null},async addCena(e){if(this.procesando=!0,this.resetEstado(),this.addIdCena.toString().length<10)return void(this.error1=!0);if(this.addIdCena.toString().length>10)return void(this.error1=!0);this.$refs.addIdCena.focus();const a=localStorage.getItem("user-token"),t=await fetch(`http://127.0.0.1:8000/api/concepto/${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),o=await t.json();if(o.id_concepto===this.addIdCena&&0==o.estado){this.procesando=!1,this.error1=!1,this.error2=!1;const e=await this.addUsuarioInvitado();localStorage.setItem("usuarioInvitado",e),localStorage.setItem("conceptoId",this.addIdCena),localStorage.setItem("idUsario",o.id_usuario),this.$router.push({name:"vistaArticulos"})}else this.error2=!0},resetEstado(){this.error=!1,this.error1=!1,this.error2=!1}},mounted(){let e=localStorage.getItem("user-token");e||this.$router.push({name:"LoginView"})}},Z=t(89);const K=(0,Z.Z)(q,[["render",T],["__scopeId","data-v-7b5c7708"]]);var P=K}}]);
//# sourceMappingURL=793.f7d3ab27.js.map