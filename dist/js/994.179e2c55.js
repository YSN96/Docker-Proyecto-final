"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[994],{5815:function(e,o,r){r.d(o,{Z:function(){return C}});var l=r(3396),t=r(9242),i=r.p+"img/logo.f337e303.png";const n=e=>((0,l.dD)("data-v-3829407f"),e=e(),(0,l.Cn)(),e),a={id:"logo-cli",class:"logo",style:{display:"none"}},s=n((()=>(0,l._)("img",{class:"logoImg",src:i,alt:"COMBOI"},null,-1))),d={id:"cliente-link",class:"container",style:{display:"none"}},c=n((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,l._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),u=n((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,l._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),p=[u],h={id:"logo-admin",class:"logo",style:{display:"none"}},m=n((()=>(0,l._)("img",{class:"logoImg",src:i,alt:"COMBOI"},null,-1))),v={id:"admin-link",class:"container",style:{display:"none"}},g=n((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,l._)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1))),b=n((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-box-arrow-right",viewBox:"0 0 16 16"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),(0,l._)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})],-1))),f=[b];function _(e,o,r,i,n,u){const b=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("nav",null,[(0,l._)("div",a,[(0,l.Wm)(b,{to:"/cliente",class:"navbar-brand font-effect-3d"},{default:(0,l.w5)((()=>[s])),_:1})]),(0,l._)("div",d,[(0,l.Wm)(b,{to:"/cliente"},{default:(0,l.w5)((()=>[(0,l.Uk)("Home")])),_:1}),(0,l.Wm)(b,{to:"/about"},{default:(0,l.w5)((()=>[(0,l.Uk)("About")])),_:1}),(0,l.Wm)(b,{to:"/contact"},{default:(0,l.w5)((()=>[(0,l.Uk)("Contact")])),_:1}),(0,l.Wm)(b,{to:"/perfil/"+n.clienteActual},{default:(0,l.w5)((()=>[c])),_:1},8,["to"]),(0,l._)("a",{onClick:o[0]||(o[0]=(0,t.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},p)]),(0,l._)("div",h,[(0,l.Wm)(b,{to:"/admin",class:"navbar-brand font-effect-3d"},{default:(0,l.w5)((()=>[m])),_:1})]),(0,l._)("div",v,[(0,l.Wm)(b,{to:"/admin"},{default:(0,l.w5)((()=>[(0,l.Uk)("Home")])),_:1}),(0,l.Wm)(b,{to:"/perfil/"+n.clienteActual},{default:(0,l.w5)((()=>[g])),_:1},8,["to"]),(0,l._)("a",{onClick:o[1]||(o[1]=(0,t.iM)(((...e)=>u.cerrarSesion&&u.cerrarSesion(...e)),["prevent"])),href:""},f)])])}r(7658);var y=r(6052),w=r.n(y),E={name:"navBar",data(){return{clienteActual:null}},methods:{async carregarDatos(){const e=localStorage.getItem("user-token"),o=w().decode(e),r=o.id;this.clienteActual=r;const l=o.role;if("ROLE_ADMIN"===l){const e=document.getElementById("logo-admin");e.style.display="block";const o=document.getElementById("admin-link");o.style.display="block"}else{const e=document.getElementById("logo-cli");e.style.display="block";const o=document.getElementById("cliente-link");o.style.display="block"}},cerrarSesion(){localStorage.clear(),this.$router.push({name:"LoginView"})}},async mounted(){let e=localStorage.getItem("user-token");e?this.carregarDatos():this.$router.push({name:"LoginView"})}},k=r(89);const I=(0,k.Z)(E,[["render",_],["__scopeId","data-v-3829407f"]]);var C=I},137:function(e,o,r){r.r(o),r.d(o,{default:function(){return oe}});var l=r(3396),t=r(9242),i=r(7139);const n=e=>((0,l.dD)("data-v-12bdf801"),e=e(),(0,l.Cn)(),e),a={class:"align"},s={class:"login"},d=n((()=>(0,l._)("header",{class:"login__header"},[(0,l._)("h1",null,[(0,l._)("i",{class:"bi bi-pencil-fill"}),(0,l.Uk)(" Editar Informaciones ")])],-1))),c=n((()=>(0,l._)("label",{for:"nombre"},"Nombre:",-1))),u=n((()=>(0,l._)("br",null,null,-1))),p={key:0,class:"alert alert-danger",role:"alert"},h=n((()=>(0,l._)("label",{for:"apellido"},"Apellido:",-1))),m=n((()=>(0,l._)("br",null,null,-1))),v={key:0,class:"alert alert-danger",role:"alert"},g=n((()=>(0,l._)("label",{for:"edad"},"Edad:",-1))),b=n((()=>(0,l._)("br",null,null,-1))),f={key:0,class:"alert alert-danger",role:"alert"},_={class:"form-check"},y=n((()=>(0,l._)("label",{style:{"padding-right":"100%"}},"Genero:",-1))),w={class:"form-check"},E=n((()=>(0,l._)("label",{for:"hombre",class:"form-check-label",style:{"padding-right":"75%"}},"Hombre",-1))),k={class:"form-check"},I=n((()=>(0,l._)("label",{for:"mujer",class:"form-check-label",style:{"padding-right":"75%"}},"Mujer",-1))),C=n((()=>(0,l._)("br",null,null,-1))),D={key:0,class:"alert alert-danger",role:"alert"},A=n((()=>(0,l._)("label",{for:"dir"},"Domicilio:",-1))),U=n((()=>(0,l._)("br",null,null,-1))),x={key:0,class:"alert alert-danger",role:"alert"},M=n((()=>(0,l._)("label",{for:"poblacion"},"Población:",-1))),S=n((()=>(0,l._)("br",null,null,-1))),P={key:0,class:"alert alert-danger",role:"alert"},V=n((()=>(0,l._)("label",{for:"provincia"},"Provincia:",-1))),q=n((()=>(0,l._)("br",null,null,-1))),B={key:0,class:"alert alert-danger",role:"alert"},z=n((()=>(0,l._)("label",{for:"codigoPostal"},"Código Postal:",-1))),L=n((()=>(0,l._)("br",null,null,-1))),$={key:0,class:"alert alert-danger",role:"alert"},F={key:1,class:"alert alert-danger",role:"alert"},K=n((()=>(0,l._)("label",{for:"mobile"},"Teléfono móvil:",-1))),W=n((()=>(0,l._)("br",null,null,-1))),N={key:0,class:"alert alert-danger",role:"alert"},j={key:1,class:"alert alert-danger",role:"alert"},H=n((()=>(0,l._)("br",null,null,-1))),O=n((()=>(0,l._)("i",{class:"bi bi-backspace"},null,-1))),T=n((()=>(0,l._)("i",{class:"bi bi-pencil-fill"},null,-1))),G=n((()=>(0,l._)("br",null,null,-1))),Z={key:0,class:"alert alert-danger",role:"alert"},J={key:1,class:"alert alert-success",role:"alert"};function R(e,o,r,n,R,Y){const Q=(0,l.up)("Navbar"),X=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(Q),(0,l._)("body",a,[(0,l._)("div",s,[d,(0,l._)("form",{class:"login__form",onSubmit:o[31]||(o[31]=(0,t.iM)(((...e)=>Y.infoEdit&&Y.infoEdit(...e)),["prevent"]))},[(0,l._)("div",null,[c,(0,l.wy)((0,l._)("input",{type:"text",id:"nombre",name:"nombre",class:(0,i.C_)(["form-control",{"is-invalid":R.procesando&&Y.nombreInvalido}]),placeholder:"Nombre","onUpdate:modelValue":o[0]||(o[0]=e=>R.cliente.nombre=e),ref:"nombre",onFocus:o[1]||(o[1]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[2]||(o[2]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,34),[[t.nr,R.cliente.nombre]]),u,R.error3&&R.procesando?((0,l.wg)(),(0,l.iD)("div",p," El Nombre no es valido! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[h,(0,l.wy)((0,l._)("input",{type:"text",id:"apellido",name:"apellido",class:(0,i.C_)(["form-control",{"is-invalid":R.procesando&&Y.apellidoInvalido}]),placeholder:"Apellido","onUpdate:modelValue":o[3]||(o[3]=e=>R.cliente.apellido=e),onFocus:o[4]||(o[4]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[5]||(o[5]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,34),[[t.nr,R.cliente.apellido]]),m,R.error4&&R.procesando?((0,l.wg)(),(0,l.iD)("div",v," El Apellido no es valido! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[g,(0,l.wy)((0,l._)("input",{type:"number",id:"edad",name:"edad",class:"form-control",placeholder:"Edad","onUpdate:modelValue":o[6]||(o[6]=e=>R.cliente.edad=e),onFocus:o[7]||(o[7]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[8]||(o[8]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,544),[[t.nr,R.cliente.edad]]),b,R.error5&&R.procesando?((0,l.wg)(),(0,l.iD)("div",f," Aviso: no se permiten registros a menores de edad! ")):(0,l.kq)("",!0)]),(0,l._)("div",_,[y,(0,l._)("div",w,[(0,l.wy)((0,l._)("input",{type:"radio",id:"hombre",name:"genero",value:"hombre","onUpdate:modelValue":o[9]||(o[9]=e=>R.cliente.genero=e),class:"form-check-input",onFocus:o[10]||(o[10]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[11]||(o[11]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,544),[[t.G2,R.cliente.genero]]),E]),(0,l._)("div",k,[(0,l.wy)((0,l._)("input",{type:"radio",id:"mujer",name:"genero",value:"mujer","onUpdate:modelValue":o[12]||(o[12]=e=>R.cliente.genero=e),class:"form-check-input",onFocus:o[13]||(o[13]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[14]||(o[14]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,544),[[t.G2,R.cliente.genero]]),I]),C,R.error6&&R.procesando?((0,l.wg)(),(0,l.iD)("div",D," Ninguna respuesta seleccionada! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[A,(0,l.wy)((0,l._)("input",{type:"text",id:"dir",name:"dir",class:(0,i.C_)(["form-control",{"is-invalid":R.procesando&&Y.dirInvalido}]),placeholder:"Domicilio","onUpdate:modelValue":o[15]||(o[15]=e=>R.cliente.direccion=e),onFocus:o[16]||(o[16]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[17]||(o[17]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,34),[[t.nr,R.cliente.direccion]]),U,R.error7&&R.procesando?((0,l.wg)(),(0,l.iD)("div",x," El Domicilio no es valido! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[M,(0,l.wy)((0,l._)("input",{type:"text",id:"poblacion",name:"poblacion",class:(0,i.C_)(["form-control",{"is-invalid":R.procesando&&Y.poblacionInvalido}]),placeholder:"Población","onUpdate:modelValue":o[18]||(o[18]=e=>R.cliente.poblacion=e),onFocus:o[19]||(o[19]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[20]||(o[20]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,34),[[t.nr,R.cliente.poblacion]]),S,R.error8&&R.procesando?((0,l.wg)(),(0,l.iD)("div",P," La Población no es valida! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[V,(0,l.wy)((0,l._)("input",{type:"text",id:"provincia",name:"provincia",class:(0,i.C_)(["form-control",{"is-invalid":R.procesando&&Y.provinciaInvalido}]),placeholder:"Provincia","onUpdate:modelValue":o[21]||(o[21]=e=>R.cliente.provincia=e),onFocus:o[22]||(o[22]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[23]||(o[23]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,34),[[t.nr,R.cliente.provincia]]),q,R.error9&&R.procesando?((0,l.wg)(),(0,l.iD)("div",B," La Provincia no es valida! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[z,(0,l.wy)((0,l._)("input",{type:"number",id:"codigoPostal",name:"codigoPostal",class:"form-control",placeholder:"Código Postal","onUpdate:modelValue":o[24]||(o[24]=e=>R.cliente.codigopostal=e),onFocus:o[25]||(o[25]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[26]||(o[26]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,544),[[t.nr,R.cliente.codigopostal]]),L,R.error11&&R.procesando?((0,l.wg)(),(0,l.iD)("div",$," EL Código Postal no debe tener menos de 5 numeros! ")):(0,l.kq)("",!0),R.error12&&R.procesando?((0,l.wg)(),(0,l.iD)("div",F," EL Código Postal no debe tener más de 5 numeros! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[K,(0,l.wy)((0,l._)("input",{type:"number",id:"mobile",name:"mobile",class:"form-control",placeholder:"Teléfono móvil","onUpdate:modelValue":o[27]||(o[27]=e=>R.cliente.mobile=e),onFocus:o[28]||(o[28]=(...e)=>Y.resetEstado&&Y.resetEstado(...e)),onKeypress:o[29]||(o[29]=(...e)=>Y.resetEstado&&Y.resetEstado(...e))},null,544),[[t.nr,R.cliente.mobile]]),W,R.error13&&R.procesando?((0,l.wg)(),(0,l.iD)("div",N," EL Teléfono móvil no debe tener menos de 9 numeros! ")):(0,l.kq)("",!0),R.error14&&R.procesando?((0,l.wg)(),(0,l.iD)("div",j," EL Teléfono móvil no debe tener más de 9 numeros!! ")):(0,l.kq)("",!0)]),(0,l._)("div",null,[H,(0,l.Wm)(X,{to:"/perfil/"+R.cliente.id,class:"btn btn-success mx-2 button"},{default:(0,l.w5)((()=>[O,(0,l.Uk)(" Volver")])),_:1},8,["to"]),(0,l._)("button",{type:"submit",class:"btn btn-primary button2",onClick:o[30]||(o[30]=(0,t.iM)(((...e)=>Y.infoEdit&&Y.infoEdit(...e)),["prevent"]))},[T,(0,l.Uk)(" Guardar")])])],32),G,R.error16&&R.procesando?((0,l.wg)(),(0,l.iD)("div",Z," Ocurrió un error ")):(0,l.kq)("",!0),R.correcto?((0,l.wg)(),(0,l.iD)("div",J," Has sido registrado correctamente! ")):(0,l.kq)("",!0)])])],64)}r(7658);var Y=r(5815),Q={name:"vistaUpdate",components:{Navbar:Y.Z},data(){return{procesando:!1,correcto:!1,error3:!1,error4:!1,error5:!1,error6:!1,error7:!1,error8:!1,error9:!1,error10:!1,error11:!1,error12:!1,error13:!1,error14:!1,error16:!1,cliente:{nombre:"",apellido:"",edad:"",genero:null,direccion:"",poblacion:"",provincia:"",pais:"",codigopostal:"",mobile:""}}},methods:{async infoEdit(){if(this.procesando=!0,this.resetEstado(),this.nombreInvalido)return void(this.error3=!0);if(this.apellidoInvalido)return void(this.error4=!0);if(this.edad<18)return void(this.error5=!0);if(null===this.genero)return void(this.error6=!0);if(this.dirInvalido)return void(this.error7=!0);if(this.poblacionInvalido)return void(this.error8=!0);if(this.poblacionInvalido)return void(this.error9=!0);if(this.paisInvalido)return void(this.error10=!0);if(this.cliente.codigopostal.toString().length<5)return void(this.error11=!0);if(this.cliente.codigopostal.toString().length>5)return void(this.error12=!0);if(this.cliente.mobile.toString().length<9)return void(this.error13=!0);if(this.cliente.mobile.toString().length>9)return void(this.error14=!0);this.$refs.nombre.focus();const e=localStorage.getItem("user-token");fetch(`http://127.0.0.1:8000/api/user/update/${this.$route.params.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({nombre:this.cliente.nombre,apellido:this.cliente.apellido,edad:this.cliente.edad,direccion:this.cliente.direccion,poblacion:this.cliente.poblacion,provincia:this.cliente.provincia,pais:this.cliente.pais,codigopostal:this.cliente.codigopostal,genero:this.cliente.genero,mobile:this.cliente.mobile})}).then((e=>e.json())).then((e=>{console.log(e),this.procesando=!1,this.correcto=!0,this.$router.push({name:"vistaPerfile"})})).catch((e=>{console.error(e)}))},resetEstado(){this.correcto=!1,this.error3=!1,this.error4=!1,this.error5=!1,this.error6=!1,this.error7=!1,this.error8=!1,this.error9=!1,this.error10=!1,this.error11=!1,this.error12=!1,this.error13=!1,this.error14=!1,this.error16=!1}},computed:{nombreInvalido(){return this.cliente.nombre.length<1},apellidoInvalido(){return this.cliente.apellido.length<1},dirInvalido(){return this.cliente.direccion.length<1},poblacionInvalido(){return this.cliente.poblacion.length<1},provinciaInvalido(){return this.cliente.provincia.length<1},paisInvalido(){return this.cliente.pais.length<1}},async mounted(){const e=localStorage.getItem("user-token");e?fetch(`http://127.0.0.1:8000/api/user/clientes/${this.$route.params.id}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>{console.log(e),this.cliente=e})).catch((e=>{console.error(e)})):this.$router.push({name:"LoginView"})}},X=r(89);const ee=(0,X.Z)(Q,[["render",R],["__scopeId","data-v-12bdf801"]]);var oe=ee}}]);
//# sourceMappingURL=994.179e2c55.js.map